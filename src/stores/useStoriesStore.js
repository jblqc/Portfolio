import{defineStore}from"pinia";import{supabase}from"@/lib/supabase";export const useStoriesStore=defineStore("stories",{state:()=>({stories:[],loading:!1}),actions:{async fetchStories(){this.loading=!0;const{data:t,error:s}=await supabase.from("stories").select("*").order("date",{ascending:!1});s||(this.stories=t),this.loading=!1},async fetchAllData(){this.stories.length||(this.loading=!0,await this.fetchStories(),this.loading=!1)},async addStory(t){this.loading=!0;const{data:s,error:i}=await supabase.from("stories").insert([t]).select();return i||this.stories.unshift(s[0]),this.loading=!1,{data:s,error:i}}}});